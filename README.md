# sm_week11
스마트모바일프로그램설계 11주차

10주차 팀 프로젝트 활동 : https://github.com/Kim-KyungJin/sm_week10

### 팀 구성   
스마트정보통신공학과 201621216 이준석   
스마트정보통신공학과 201921036 김경진   
스마트정보통신공학과 201921054 박유리   
스마트정보통신공학과 201921083 이혜정   
스마트정보통신공학과 201921104 홍수빈    
스마트정보통신공학과 201990009 미르자크메더브 사르더르    

   ***   
### 모든 항목은 변경되거나 삭제될 여지가 있습니다   
   ***   
   
   
>진도표
>>![20210512_213237](https://user-images.githubusercontent.com/76034369/117975623-d1ef7000-b369-11eb-9232-a562c93b3666.png)   
>>![KakaoTalk_20210512_215446341](https://user-images.githubusercontent.com/57963888/117978537-f1d46300-b36c-11eb-8867-f82abbd1c939.jpg)   
>>![KakaoTalk_20210512_215446537](https://user-images.githubusercontent.com/57963888/117978542-f3059000-b36c-11eb-805b-8ed434f123fc.jpg)   

### (김경진)
>
>압축파일이 커서 등록이 안 됩니다.   
>제가 저장했던 링크를 올려두겠습니다.   
>https://github.com/Kim-KyungJin/sm_project/tree/addfragment   
>>1. 테마 고치기   
>>
>>따로 만들어뒀던 앱을 합치는 작업을 했습니다.   
>>테마 색을 맞추어 통일하였습니다.   
>>Fragment를 사용하여 왼쪽이나 오른쪽으로 넘기면 탭 메뉴에 등록한 내용이 나오도록 하였습니다.   
>>
>>![KakaoTalk_20210517_211859235](https://user-images.githubusercontent.com/57963888/118488334-97654900-b756-11eb-94ce-6e74ed59dfff.png)
>>![KakaoTalk_20210517_211859235_01](https://user-images.githubusercontent.com/57963888/118488339-97fddf80-b756-11eb-85cb-ae2b37c17e8e.png)    
>>

>>리뷰를 작성할 때 이미지를 넣지 않으면 튕기는 현상이 발생했습니다.   
>>이 오류를 고치는 중에 있습니다.   
>>
>>![KakaoTalk_20210517_211859235_02](https://user-images.githubusercontent.com/57963888/118488399-a946ec00-b756-11eb-9584-6f26538da232.png)
>>![KakaoTalk_20210517_211859235_03](https://user-images.githubusercontent.com/57963888/118488404-aa781900-b756-11eb-8a1e-cdee2b569968.png)
>>![KakaoTalk_20210517_211859235_04](https://user-images.githubusercontent.com/57963888/118488410-aa781900-b756-11eb-8b1f-b4cf9ac1a295.png)   
>>
>>
>>
### 태그 기능 추가, 비용 설정 기능 보안 (홍수빈)
>> 실행코드는 깃허브 링크로 달아둡니다(용량이 커서 파일 첨부가 불가능하여 차선으로 선택한 방법이니 양해 부탁드립니다.). 두 기능 모두 같은 코드안에 있지만 현재 아직 원활한 화면 이동을 지원하지 않아(다른 사람들의 코드와 병합 후 추가 예정) 두 기능을 보시려면 Manifest에서 시작화면을 각각 설정해줘야합니다. 이 점은 근시일내로 화면전환 기능을 추가할 예정입니다.
>> https://github.com/H-Subin/sm_project/tree/addTag
>
>1. 태그 기능 추가
>
>https://user-images.githubusercontent.com/76034369/118491440-f7112380-b759-11eb-9199-d7eb94a27cfb.mp4
>>가게 정보에 세부적으로 '케이크 맛집', '20대 인기', '이벤트 중'과 같은 Tag 기능을 추가 하기위해 listview를 이용하여 화면을 구성했습니다.
>>후에 저장 버튼을 누르면 "현재 n 개 선택됨"으로 바뀌고 설정한 값은 데이터베이스에 올려서 후에 필터링의 기준으로 사용됩니다.(코드 추가 중)
>>
>>![20210517_214801](https://user-images.githubusercontent.com/76034369/118491145-a6012f80-b759-11eb-8ef5-c5bbfa0a87f2.png)
>>
>>
>>
>>2. 비용 설정 기능 보안
>>
>https://user-images.githubusercontent.com/76034369/118493181-caf6a200-b75b-11eb-880a-91b74283a61b.mp4
>>이전 주차에서 내부에서는 변수에 각 항목별로 자동 셋팅 된 비용이 다음 화면에서 출력되지 않는 버그가 있었는데, 원인은 제가 5개의 int값을 한번에 전달하고 싶어서
>>int형 array에 주소값 0~4까지 지정하여 담아준 후 array를 통째로 넘긴 후 주소값을 이용해 다시 새로운 변수에 받아오기 위해 작성했던 코드 였습니다.
>>여러 시도끝에 array의 intent나 bundle을 이용한 전송에 실패하고 그냥 각각의 값을 int형으로 따로 넘겨주자 정상작동 하였습니다.
>>그리고 이번 주차에는 직접 사용자가 항목별로 원하는 비율을 설정 할 수 있도록 하는 기능을 추가 했습니다.
>>cardview를 2개를 만들어서 spinner가 직접 지정 모드를 선택하는지, 아니면 일반 추천 모드를 선택하는지를 switch문으로 받아와서 상황에 맞게 두개의 cardview를 setVisibility(View.VISIBLE)/setVisibility(View.GONE) 처리를 하여 전환시켰습니다.
>>
>>![20210517_215621](https://user-images.githubusercontent.com/76034369/118492192-c087d880-b75a-11eb-90d5-a17566b93b32.png)
>>
>>또한 새로운 Toast Message를 추가하여 긍액이 입력되지 않은 경우, 금액이 1000원 미만인 경우, 직접 지정 모드의 각 항목의 합이 10을 넘을 경우, 모드를 선택하지 않을 경우에는 
>>각각의 경고 메시지와 함께 값이 계산되지 않도록 하였습니다. 

### 가게 메뉴 등록 (박유리)
>
> 안드로이드 실행이 잘 안돼서 캡쳐본 올립니다.
> 
> 1. 가게 메뉴 등록
> 
>> ![btn](https://user-images.githubusercontent.com/79883558/118493735-62f48b80-b75c-11eb-8081-a326a7cb6e27.png)
>> ![btn2](https://user-images.githubusercontent.com/79883558/118493758-6a1b9980-b75c-11eb-9596-73b2048fb434.png)
>> 
>> 이번주는 업주가 사용하는 페이지인 가게의 메뉴를 등록하는 기능을 하였습니다.
>> 입력 필수 항목이 입력되지 않을 경우 입력하라는 창이 뜨도록 하였고 입력 항목에 입력에 되지 않으면 버튼을 누를 수 없게 만들었습니다.
>> 
>> ![upload](https://user-images.githubusercontent.com/79883558/118493997-a7802700-b75c-11eb-80a0-48e79acde202.png)
>>![upload2](https://user-images.githubusercontent.com/79883558/118494013-a9e28100-b75c-11eb-8e4e-91e03ac13550.png)
>>
>> 이미지 업로드 버튼을 누르면 본인의 휴대폰 갤러리에 사진을 업로드 할 수 있게 하였는데 저번주와 마찬가지로 DB에 업로드가 안되서 이미지 업로드와 이 페이지의 다른 기능들 밑에 혜정이가 최종 마무리 하였습니다.


### 가게 정보 출력 및 수정, 메뉴 등록 (이혜정)
>
> #### *해당 코드는 압축해서 위에 따로 추가하였습니다.*
> 
>> 1. 가게 정보 수정
>>
>> 지난주에 가게 정보 수정의 기능과 레이아웃을 따로 구현한 것을 합치는 작업을 하였습니다.
>> 가게 종류를 선택하는 항목과 가게 소개하는 한줄 소개 항목이 추가되었고 가게 종류와 가게의 지역구는 spinner로 선택할 수 있게 되었습니다.
>> spinner로 입력받는 값은 나중에 데이터를 출력하기 편하게 하기 위해 index(숫자) 값과 name(문자) 값 둘다 DB에 저장하게 하였습니다.
>> 영업시간과 한줄 소개 항목을 제외하고는 꼭 입력해야하며 입력하지 않을 시 Toast가 뜨게 하였습니다.
>> 다음은 그 실행영상입니다.

>> [가게 정보 수정](https://user-images.githubusercontent.com/79883808/118481209-2f126980-b74e-11eb-998b-3dad08712313.mp4)

>> 2. 가게 정보 출력
>> 
>> 위처럼 데이터 베이스에 입력, 수정된 가게 정보를 출력하는 기능 입니다.
>> 상호명, 위치정보, 영업시간을 보여주게 하였습니다.
>> 다음은 실행영상입니다.

>>[가게 정보 출력](https://user-images.githubusercontent.com/79883808/118482239-6a616800-b74f-11eb-910f-e2f8410eed5c.mp4)


>> 3. 메뉴 등록
>> 
>> 지난주에 갤러리에 접속해 선택한 이미지를 앱 화면에 띄우는 데 성공하였습니다.
>> 이번주에는 이 기능을 사용하여 가게 메뉴를 등록할 때 해당 메뉴 이미지를 DB에 올리는 것까지 진행하였습니다.
>> 메뉴 정보는 이름과 가격, 이미지를 입력받습니다. 이때 이름과 가격은 필수 항목으로 입력하지 않을 시 Toast를 띄웁니다.
>> 이미지는 필수 사항은 아니지만 입력하지 않을 시 "이미지 없이 상품을 등록합니다"라는 안내창을 띄워 한번더 묻고 "네" 버튼을 누르면 DB에 저장, "아니오"를 누르면 진행하지 않게 하였습니다.
>> 이미지는 파이어베이스에서 Storage DB에 저장되게 하였고 RealTime에 ProductInfo 속에도 메뉴 이름과 가격과 함께 이미지 이름을 저장하였습니다.
>> 이때 이미지 이름은 해당하는 가게의 uid + 등록 날짜 + 등록 시간으로 하였습니다.
>> Strorage DB에 이미지 이름도 마찬가지이며 Storage는 이름만이 아닌 파일형태로 올릴수 있게 파이어베이스에서 제공하는 DB이기 때문에 사진으로 올려지게됩니다.
>> 다음은 그 실행영상입니다.
 
>> [메뉴 등록](https://user-images.githubusercontent.com/79883808/118485909-f37a9e00-b753-11eb-9a70-169641ece6b6.mp4)

>> 보면 이미지를 선택하지 않고 등록하여도 해당 메뉴의 이름과 가격은 입력된 값대로, 이미지 데이터는 비어서 제대로 저장되는 것을 알 수 있습니다.
>> 

### DB내 가게 이름 필터링 (이준석)

>>파이어베이스 리얼타임데이터베이스를 안드로이드와 연동시키는 도중에 안드로이드 스튜디오 내에서 빌드 플러그 인 오류가 나게 되었습니다. 
>>![오류](https://user-images.githubusercontent.com/79889548/118489764-2b83e000-b758-11eb-8f49-ce65d1912737.PNG)
